(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{299:function(t,e,o){"use strict";o(17),o(7),o(14),o(21),o(11),o(6),o(13),o(15),o(10),o(12);var n=o(60);function a(t){return(a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function r(t,e){var o;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(o=function(t,e){if(!t)return;if("string"==typeof t)return s(t,e);var o=Object.prototype.toString.call(t).slice(8,-1);"Object"===o&&t.constructor&&(o=t.constructor.name);if("Map"===o||"Set"===o)return Array.from(t);if("Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o))return s(t,e)}(t))||e&&t&&"number"==typeof t.length){o&&(t=o);var n=0,a=function(){};return{s:a,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,i=!0,l=!1;return{s:function(){o=t[Symbol.iterator]()},n:function(){var t=o.next();return i=t.done,t},e:function(t){l=!0,r=t},f:function(){try{i||null==o.return||o.return()}finally{if(l)throw r}}}}function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var o=0,n=new Array(e);o<e;o++)n[o]=t[o];return n}function i(t){var e;App.isShopBuilder||(e=t?t.getModalContainer()[0].querySelectorAll("[data-autofocus]"):document.querySelectorAll("[data-autofocus]"),setTimeout((function(){e[0]&&e[0].focus()}),0))}e.a={autoFocus:function(){var t,e=r(document.getElementsByClassName("modal"));try{for(e.s();!(t=e.n()).done;){var o=t.value;"object"===a(o)&&function(){var t=n.default.findModal(o);t&&t.on("shown.bs.modal",(function(){i(t)}))}()}}catch(t){e.e(t)}finally{e.f()}i()},triggerAutoFocus:i}},335:function(t,e,o){"use strict";o.r(e);var n=function(){var t=this,e=t.$createElement,o=t._self._c||e;return o("div",{staticClass:"login-pwd-reset"},[o("form",{ref:"loginForm",attrs:{method:"post"}},[o("div",{class:{"modal-body":t.modalElement}},[o("div",{staticClass:"row"},[o("div",{staticClass:"col-12"},[o("div",{staticClass:"input-unit",attrs:{"data-validate":"mail"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.username,expression:"username"}],attrs:{"data-testing":"email-login",type:"email",name:"email",autocomplete:"email",id:"email"+t._uid,"data-autofocus":""},domProps:{value:t.username},on:{input:function(e){e.target.composing||(t.username=e.target.value)}}}),t._v(" "),o("label",{attrs:{for:"email"+t._uid}},[t._v(t._s(t.$translate("Ceres::Template.loginEmail"))+"*")])]),t._v(" "),o("span",{staticClass:"error-msg"},[t._v(t._s(t.$translate("Ceres::Template.loginEnterConfirmEmail")))])]),t._v(" "),o("div",{staticClass:"col-12"},[o("div",{staticClass:"input-unit",class:{"no-bottom":t.modalElement},attrs:{"data-validate":"text"}},[o("input",{directives:[{name:"model",rawName:"v-model",value:t.password,expression:"password"}],attrs:{"data-testing":"password-login",type:"password",name:"password",autocomplete:"current-password",id:"password"+t._uid},domProps:{value:t.password},on:{input:function(e){e.target.composing||(t.password=e.target.value)}}}),t._v(" "),o("label",{attrs:{for:"password"+t._uid}},[t._v(t._s(t.$translate("Ceres::Template.loginPassword"))+"*")])]),t._v(" "),o("span",{staticClass:"error-msg"},[t._v(t._s(t.$translate("Ceres::Template.loginEmptyPassword")))])])])]),t._v(" "),o("div",{class:{"modal-footer justify-content-between":t.modalElement,row:!t.modalElement}},[o("div",{class:{"col-7 col-sm-4":!t.modalElement}},[o("a",{staticClass:"small text-appearance",attrs:{href:"javascript:void(0)"},on:{click:t.showResetPwdView}},[t._v(t._s(t.$translate("Ceres::Template.loginForgotPassword"))+"?")])]),t._v(" "),o("div",{class:{"col-5 col-sm-8 text-sm-right":!t.modalElement}},[t._t("extend-overlay-buttons"),t._v(" "),o("button",{staticClass:"btn btn-primary btn-appearance btn-medium",class:[{"float-right":!t.modalElement},t.buttonSizeClass],attrs:{"data-testing":"submit-login",disabled:t.isDisabled},on:{click:function(e){return e.preventDefault(),t.validateLogin(e)}}},[t._v("\n                    "+t._s(t.$translate("Ceres::Template.login"))+"\n                    "),o("icon",{attrs:{icon:"user",loading:t.isDisabled}})],1)],2)])])])};n._withStripped=!0;o(18);var a=o(138),r=o(8),s=o(9),i=o(60),l=o(299),u=o(29),d=o(1),c={mixins:[a.a],props:{backlink:{type:String},modalElement:{type:String},hasToForward:{type:Boolean,default:!1}},data:function(){return{password:"",username:"",loginFields:[],isDisabled:!1}},mounted:function(){var t=this;this.$nextTick((function(){t.loginFields=t.$refs.loginForm.querySelectorAll(".input-unit"),l.a.triggerAutoFocus()}))},watch:{password:function(t,e){this.resetError()},username:function(t,e){this.resetError()}},methods:{showLogin:function(){i.default.findModal(document.getElementById(this.modalElement)).show()},validateLogin:function(){var t=this;u.default.validate($("#login-form-"+this._uid)).done((function(){t.sendLogin()})).fail((function(t){u.default.markInvalidFields(t,"error")}))},sendLogin:function(){var t=this;this.isDisabled=!0,r.default.post("/rest/io/customer/login",{email:this.username,password:this.password},{supressNotifications:!0}).done((function(e){r.default.setToken(e),s.default.success(t.$translate("Ceres::Template.loginSuccessful")).closeAfter(3e3),null!==t.backlink&&t.backlink?location.assign(decodeURIComponent(t.backlink)):t.hasToForward?location.assign(location.origin):location.reload()})).fail((function(e){switch(t.isDisabled=!1,e.error.code){case 401:t.loginFields.forEach((function(t){return t.classList.add("has-login-error")}));var o="Ceres::Template.loginFailed";e.error.message.length>0&&"user is blocked"===e.error.message&&(o="Ceres::Template.loginBlocked"),s.default.error(t.$translate(o)).closeAfter(1e4);break;default:return}}))},showResetPwdView:function(){var t=this;this.resetError(),this.$store.dispatch("loadComponent","forgot-password-modal"),Vue.nextTick((function(){var e=document.querySelector("#resetPwd");Object(d.b)(e).$data.username=t.username;var o=function(){return i.default.findModal(e).show()};t.modalElement?i.default.findModal(document.getElementById(t.modalElement)).hide().then(o):o()}))},resetError:function(){this.loginFields.forEach((function(t){return t.classList.remove("has-login-error")})),u.default.unmarkAllFields("#login-form-"+this._uid)}}},m=o(3),f=Object(m.a)(c,n,[],!1,null,null,null);f.options.__file="resources/js/src/app/components/customer/login/Login.vue";e.default=f.exports}}]);
//# sourceMappingURL=ceres-client-3.min.js.map