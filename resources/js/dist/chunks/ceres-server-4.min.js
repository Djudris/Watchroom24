exports.ids=[4],exports.modules={195:function(t,e,r){"use strict";r.d(e,"a",(function(){return i}));r(62),r(41),r(32),r(7),r(17),r(5),r(18),r(12),r(10),r(13),r(22),r(19),r(16);function n(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return o(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var s=["btn-sm","btn-lg"],a={sm:"btn-sm",md:"",lg:"btn-lg"},i={props:{buttonSize:{type:[String,null],default:null,validator:function(t){return-1!==[""].concat(s,n(Object.keys(a))).indexOf(t)}}},computed:{buttonSizeClass:function(){return a.hasOwnProperty(this.buttonSize)?a[this.buttonSize]:this.buttonSize}}}},200:function(t,e,r){"use strict";r(19),r(5),r(16),r(22),r(12),r(7),r(17),r(18),r(10),r(13);var n=r(122);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function s(t,e){var r;if("undefined"==typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(r=function(t,e){if(!t)return;if("string"==typeof t)return a(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return a(t,e)}(t))||e&&t&&"number"==typeof t.length){r&&(t=r);var n=0,o=function(){};return{s:o,n:function(){return n>=t.length?{done:!0}:{done:!1,value:t[n++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,i=!0,l=!1;return{s:function(){r=t[Symbol.iterator]()},n:function(){var t=r.next();return i=t.done,t},e:function(t){l=!0,s=t},f:function(){try{i||null==r.return||r.return()}finally{if(l)throw s}}}}function a(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function i(t){var e;App.isShopBuilder||(e=t?t.getModalContainer()[0].querySelectorAll("[data-autofocus]"):document.querySelectorAll("[data-autofocus]"),setTimeout((function(){e[0]&&e[0].focus()}),0))}e.a={autoFocus:function(){var t,e=s(document.getElementsByClassName("modal"));try{for(e.s();!(t=e.n()).done;){var r=t.value;"object"===o(r)&&function(){var t=n.default.findModal(r);t&&t.on("shown.bs.modal",(function(){i(t)}))}()}}catch(t){e.e(t)}finally{e.f()}i()},triggerAutoFocus:i}},275:function(t,e,r){"use strict";r.r(e);var n=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{staticClass:"login-pwd-reset"},[t._ssrNode("<form"+t._ssrAttr("id","login-form-"+t._uid)+' method="post">',"</form>",[t._ssrNode("<div"+t._ssrClass(null,{"modal-body":t.modalElement})+'><div class="row"><div class="col-12"><div data-validate="mail" class="input-unit"><input data-testing="email-login" type="email" name="email" autocomplete="email"'+t._ssrAttr("id","email"+t._uid)+" data-autofocus"+t._ssrAttr("value",t.username)+"> <label"+t._ssrAttr("for","email"+t._uid)+">"+t._ssrEscape(t._s(t.$translate("Ceres::Template.loginEmail"))+"*")+'</label></div> <span class="error-msg">'+t._ssrEscape(t._s(t.$translate("Ceres::Template.loginEnterConfirmEmail")))+'</span></div> <div class="col-12"><div data-validate="text"'+t._ssrClass("input-unit",{"no-bottom":t.modalElement})+'><input data-testing="password-login" type="password" name="password" autocomplete="current-password"'+t._ssrAttr("id","password"+t._uid)+t._ssrAttr("value",t.password)+"> <label"+t._ssrAttr("for","password"+t._uid)+">"+t._ssrEscape(t._s(t.$translate("Ceres::Template.loginPassword"))+"*")+'</label></div> <span class="error-msg">'+t._ssrEscape(t._s(t.$translate("Ceres::Template.loginEmptyPassword")))+"</span></div></div></div> "),t._ssrNode("<div"+t._ssrClass(null,{"modal-footer justify-content-between":t.modalElement,row:!t.modalElement})+">","</div>",[t._ssrNode("<div"+t._ssrClass(null,{"col-7 col-sm-4":!t.modalElement})+'><a href="javascript:void(0)" class="small text-appearance">'+t._ssrEscape(t._s(t.$translate("Ceres::Template.loginForgotPassword"))+"?")+"</a></div> "),t._ssrNode("<div"+t._ssrClass(null,{"col-5 col-sm-8 text-sm-right":!t.modalElement})+">","</div>",[t._t("extend-overlay-buttons"),t._ssrNode(" "),t._ssrNode('<button data-testing="submit-login"'+t._ssrAttr("disabled",t.isDisabled)+t._ssrClass("btn btn-primary btn-appearance btn-medium",[{"float-right":!t.modalElement},t.buttonSizeClass])+">","</button>",[t._ssrNode(t._ssrEscape("\n                    "+t._s(t.$translate("Ceres::Template.login"))+"\n                    ")),r("icon",{attrs:{icon:"user",loading:t.isDisabled}})],2)],2)],2)],2)])};n._withStripped=!0;r(21);var o=r(195),s=r(8),a=r(27),i=r(122),l=r(200),u=r(54),d=r(1),c={mixins:[o.a],props:{backlink:{type:String},modalElement:{type:String},hasToForward:{type:Boolean,default:!1}},data:function(){return{password:"",username:"",loginFields:[],isDisabled:!1}},mounted:function(){var t=this;this.$nextTick((function(){t.loginFields=document.querySelector("#login-form-"+t._uid).querySelectorAll(".input-unit"),l.a.triggerAutoFocus()}))},watch:{password:function(t,e){this.resetError()},username:function(t,e){this.resetError()}},methods:{showLogin:function(){i.default.findModal(document.getElementById(this.modalElement)).show()},validateLogin:function(){var t=this;u.a.validate($("#login-form-"+this._uid)).done((function(){t.sendLogin()})).fail((function(t){u.a.markInvalidFields(t,"error")}))},sendLogin:function(){var t=this;this.isDisabled=!0,s.default.post("/rest/io/customer/login",{email:this.username,password:this.password},{supressNotifications:!0}).done((function(e){s.default.setToken(e),a.default.success(t.$translate("Ceres::Template.loginSuccessful")).closeAfter(3e3),null!==t.backlink&&t.backlink?location.assign(decodeURIComponent(t.backlink)):t.hasToForward?location.assign(location.origin):location.reload()})).fail((function(e){switch(t.isDisabled=!1,e.error.code){case 401:t.loginFields.forEach((function(t){return t.classList.add("has-login-error")}));var r="Ceres::Template.loginFailed";e.error.message.length>0&&"user is blocked"===e.error.message&&(r="Ceres::Template.loginBlocked"),a.default.error(t.$translate(r)).closeAfter(1e4);break;default:return}}))},showResetPwdView:function(){var t=this;this.resetError(),this.$store.dispatch("loadComponent","forgot-password-modal"),Vue.nextTick((function(){var e=document.querySelector("#resetPwd");Object(d.b)(e).$data.username=t.username;var r=function(){return i.default.findModal(e).show()};t.modalElement?i.default.findModal(document.getElementById(t.modalElement)).hide().then(r):r()}))},resetError:function(){this.loginFields.forEach((function(t){return t.classList.remove("has-login-error")})),u.a.unmarkAllFields("#login-form-"+this._uid)}}},m=r(2),f=Object(m.a)(c,n,[],!1,null,null,"14ba12ab");f.options.__file="resources/js/src/app/components/customer/login/Login.vue";e.default=f.exports}};
//# sourceMappingURL=ceres-server-4.min.js.map