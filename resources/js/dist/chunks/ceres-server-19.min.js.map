{"version":3,"sources":["webpack:///./resources/js/src/app/components/basket/Coupon.vue?36ed","webpack:///resources/js/src/app/components/basket/Coupon.vue","webpack:///./resources/js/src/app/components/basket/Coupon.vue?523c","webpack:///./resources/js/src/app/components/basket/Coupon.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","_ssrNode","isCheckoutReadonly","$translate","_ssrEscape","_s","couponReadonlyInfoText","_ssrClass","_ssrAttr","disabled","couponCode","waiting","attrs","icon","loading","_withStripped","component","options","__file"],"mappings":"0EAAA,IAAIA,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eACTC,EAAKJ,EAAIK,MAAMD,IAAMF,EACzB,OAAOE,EACL,MACA,CAAEE,YAAa,OACf,CACEN,EAAIO,UACDP,EAAIQ,oBACHR,EAAIS,WAAW,0CACb,MACAT,EAAIU,WACF,aAAeV,EAAIW,GAAGX,EAAIY,wBAA0B,UAEtD,OACA,iBAAa,KAEnBZ,EAAIO,SACF,OACEP,EAAIa,UAAU,KAAM,CAClB,eAAe,EACf,oBAAqBb,EAAIQ,mBACzB,aAAcR,EAAIQ,qBAEpB,IACF,SACA,CACER,EAAIO,SACF,qBACEP,EAAIc,SACF,cACAd,EAAIS,WAAW,sCAEjBT,EAAIc,SAAS,WAAYd,EAAIe,UAAYf,EAAIQ,oBAC7C,+BACAR,EAAIc,SAAS,QAASd,EAAIgB,YAC1B,2BAEJhB,EAAIO,SAAS,iCAAkC,UAAW,CACvDP,EAAIe,SAyBDf,EAAIO,SACF,wBACEP,EAAIc,SACF,WACAd,EAAIiB,SAAWjB,EAAIQ,oBAErB,mEACF,YACA,CACEJ,EAAG,OAAQ,CACTc,MAAO,CAAEC,KAAM,QAASC,QAASpB,EAAIiB,WAEvCjB,EAAIO,SACFP,EAAIU,WACF,qBACEV,EAAIW,GACFX,EAAIS,WAAW,iCAEjB,oBAIR,GA9CFT,EAAIO,SACF,wBACEP,EAAIc,SACF,WACAd,EAAIiB,SAAWjB,EAAIQ,oBAErB,mFACF,YACA,CACEJ,EAAG,OAAQ,CACTc,MAAO,CAAEC,KAAM,OAAQC,QAASpB,EAAIiB,WAEtCjB,EAAIO,SACFP,EAAIU,WACF,qBACEV,EAAIW,GACFX,EAAIS,WAAW,iCAEjB,oBAIR,MA4BV,IAGJ,IAIJV,EAAOsB,eAAgB,E,0aCtDvB,YC5C8M,EDkD9M,CAEE,MAAF,CACI,SACJ,CACM,KAAN,OACM,QAAN,gBAIE,KAVF,WAYI,MAAJ,CACM,SAAN,EACM,WAAN,KAIE,MACF,CACI,mBADJ,SACA,GAEM,KAAN,eAIE,S,+VAAF,EAEI,SAFJ,WAIM,QAAN,0BAQA,aACI,mBAAJ,YAAM,OAAN,0BACI,gBAAJ,YAAM,OAAN,0BACI,mBAAJ,YAAM,OAAN,wBAIE,QA7CF,WA8CI,IAAJ,OACI,KAAJ,sBAEA,uBAEQ,EAAR,qCAKE,QACF,CACI,WADJ,WAEM,IAAN,OAEM,KAAN,6CAEA,0BAEQ,KAAR,WAEQ,KAAR,0DACA,YAEU,EAAV,WACU,EAAV,QACA,sDACA,mBAEA,YAEU,EAAV,WACU,EAAV,gEAKQ,EAAR,MACA,gDACA,iBAII,WAhCJ,WAiCM,IAAN,OACM,KAAN,WAEM,KAAN,0DACA,YAEQ,EAAR,WACQ,EAAR,QACA,sDACA,mBAEA,YAEQ,EAAR,WACQ,EAAR,MACA,sDACA,oBAII,gCArDJ,SAqDA,GAEM,IAAN,4BACM,OAAN,2BAEA,wDAGA,wD,OEjKIC,EAAY,YACd,EACAvB,EHwFoB,IGtFpB,EACA,KACA,KACA,YAIFuB,EAAUC,QAAQC,OAAS,oDACZ,UAAAF,E","file":"chunks/ceres-server-19.min.js","sourcesContent":["var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    { staticClass: \"cmp\" },\n    [\n      _vm._ssrNode(\n        (_vm.isCheckoutReadonly &&\n        !!_vm.$translate(\"Ceres::Template.couponReadonlyInfoText\")\n          ? \"<p>\" +\n            _vm._ssrEscape(\n              \"\\n        \" + _vm._s(_vm.couponReadonlyInfoText) + \"\\n    \"\n            ) +\n            \"</p>\"\n          : \"<!---->\") + \" \"\n      ),\n      _vm._ssrNode(\n        \"<div\" +\n          _vm._ssrClass(null, {\n            \"input-group\": true,\n            \"component-loading\": _vm.isCheckoutReadonly,\n            \"is-loading\": _vm.isCheckoutReadonly\n          }) +\n          \">\",\n        \"</div>\",\n        [\n          _vm._ssrNode(\n            '<input type=\"text\"' +\n              _vm._ssrAttr(\n                \"placeholder\",\n                _vm.$translate(\"Ceres::Template.couponEnterCoupon\")\n              ) +\n              _vm._ssrAttr(\"disabled\", _vm.disabled || _vm.isCheckoutReadonly) +\n              ' data-testing=\"coupon-input\"' +\n              _vm._ssrAttr(\"value\", _vm.couponCode) +\n              ' class=\"form-control\"> '\n          ),\n          _vm._ssrNode('<span class=\"input-group-btn\">', \"</span>\", [\n            !_vm.disabled\n              ? _vm._ssrNode(\n                  '<button type=\"button\"' +\n                    _vm._ssrAttr(\n                      \"disabled\",\n                      _vm.waiting || _vm.isCheckoutReadonly\n                    ) +\n                    ' data-testing=\"coupon-redeem\" class=\"btn btn-medium btn-primary btn-appearance\">',\n                  \"</button>\",\n                  [\n                    _c(\"icon\", {\n                      attrs: { icon: \"gift\", loading: _vm.waiting }\n                    }),\n                    _vm._ssrNode(\n                      _vm._ssrEscape(\n                        \"\\n                \" +\n                          _vm._s(\n                            _vm.$translate(\"Ceres::Template.couponRedeem\")\n                          ) +\n                          \"\\n            \"\n                      )\n                    )\n                  ],\n                  2\n                )\n              : _vm._ssrNode(\n                  '<button type=\"button\"' +\n                    _vm._ssrAttr(\n                      \"disabled\",\n                      _vm.waiting || _vm.isCheckoutReadonly\n                    ) +\n                    ' data-testing=\"coupon-remove\" class=\"btn btn-medium btn-danger\">',\n                  \"</button>\",\n                  [\n                    _c(\"icon\", {\n                      attrs: { icon: \"trash\", loading: _vm.waiting }\n                    }),\n                    _vm._ssrNode(\n                      _vm._ssrEscape(\n                        \"\\n                \" +\n                          _vm._s(\n                            _vm.$translate(\"Ceres::Template.couponRemove\")\n                          ) +\n                          \"\\n            \"\n                      )\n                    )\n                  ],\n                  2\n                )\n          ])\n        ],\n        2\n      )\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","<template>\n    <div class=\"cmp\">\n        <p v-if=\"isCheckoutReadonly && !!$translate('Ceres::Template.couponReadonlyInfoText')\">\n            {{ couponReadonlyInfoText }}\n        </p>\n        <div :class=\"{'input-group':true, 'component-loading':isCheckoutReadonly, 'is-loading':isCheckoutReadonly}\">\n            <input\n                type=\"text\"\n                class=\"form-control\"\n                v-model=\"couponCode\"\n                :placeholder=\"$translate('Ceres::Template.couponEnterCoupon')\"\n                @keyup.enter=\"redeemCode()\"\n                :disabled=\"disabled || isCheckoutReadonly\"\n                data-testing=\"coupon-input\"\n            >\n            <span class=\"input-group-btn\">\n                <button\n                    class=\"btn btn-medium btn-primary btn-appearance\"\n                    type=\"button\"\n                    @click=\"redeemCode()\"\n                    :disabled=\"waiting || isCheckoutReadonly\" v-if=\"!disabled\"\n                    data-testing=\"coupon-redeem\"\n                >\n                    <icon icon=\"gift\" :loading=\"waiting\"></icon>\n                    {{ $translate(\"Ceres::Template.couponRedeem\") }}\n                </button>\n                <button\n                    class=\"btn btn-medium btn-danger\"\n                    type=\"button\"\n                    @click=\"removeCode()\"\n                    :disabled=\"waiting || isCheckoutReadonly\"\n                    v-else\n                    data-testing=\"coupon-remove\"\n                >\n                    <icon icon=\"trash\" :loading=\"waiting\"></icon>\n                    {{ $translate(\"Ceres::Template.couponRemove\") }}\n                </button>\n            </span>\n        </div>\n    </div>\n</template>\n\n<script>\n\nconst NotificationService = require(\"../../services/NotificationService\");\n\nimport ExceptionMap from \"../../exceptions/ExceptionMap\";\nimport TranslationService from \"../../services/TranslationService\";\nimport { mapState } from \"vuex\";\n\nexport default {\n\n    props: {\n        template:\n        {\n            type: String,\n            default: \"#vue-coupon\"\n        }\n    },\n\n    data()\n    {\n        return {\n            waiting: false,\n            couponCode: \"\"\n        };\n    },\n\n    watch:\n    {\n        redeemedCouponCode(val)\n        {\n            this.couponCode = val;\n        }\n    },\n\n    computed:\n    {\n        disabled()\n        {\n            if (this.redeemedCouponCode)\n            {\n                return true;\n            }\n\n            return false;\n        },\n\n        ...mapState({\n            redeemedCouponCode: state => state.basket.data.couponCode,\n            isBasketLoading: state => state.basket.isBasketLoading,\n            isCheckoutReadonly: state => state.checkout.readOnly\n        })\n    },\n\n    mounted()\n    {\n        this.$nextTick(() =>\n        {\n            if (this.redeemedCouponCode)\n            {\n                this.couponCode = this.redeemedCouponCode;\n            }\n        });\n    },\n\n    methods:\n    {\n        redeemCode()\n        {\n            // remove whitespaces\n            this.couponCode = this.couponCode.replace(/\\s/g, \"\");\n\n            if (this.couponCode.length > 0)\n            {\n                this.waiting = true;\n\n                this.$store.dispatch(\"redeemCouponCode\", this.couponCode).then(\n                    response =>\n                    {\n                        this.waiting = false;\n                        NotificationService.success(\n                            TranslationService.translate(\"Ceres::Template.couponRedeemSuccess\")\n                        ).closeAfter(10000);\n                    },\n                    error =>\n                    {\n                        this.waiting = false;\n                        NotificationService.error(this.getCouponRedemptionErrorMessage(error)).closeAfter(10000);\n                    });\n            }\n            else\n            {\n                NotificationService.error(\n                    TranslationService.translate(\"Ceres::Template.couponIsEmpty\")\n                ).closeAfter(10000);\n            }\n        },\n\n        removeCode()\n        {\n            this.waiting = true;\n\n            this.$store.dispatch(\"removeCouponCode\", this.couponCode).then(\n                response =>\n                {\n                    this.waiting = false;\n                    NotificationService.success(\n                        TranslationService.translate(\"Ceres::Template.couponRemoveSuccess\")\n                    ).closeAfter(10000);\n                },\n                error =>\n                {\n                    this.waiting = false;\n                    NotificationService.error(\n                        TranslationService.translate(\"Ceres::Template.couponRemoveFailure\")\n                    ).closeAfter(10000);\n                });\n        },\n\n        getCouponRedemptionErrorMessage(error)\n        {\n            const errorCode = error && error.warn && error.warn.code || 0;\n            if (errorCode > 0 && ExceptionMap.has(errorCode.toString()))\n            {\n                return TranslationService.translate(\"Ceres::Template.\" + ExceptionMap.get(errorCode.toString()));\n            }\n\n            return TranslationService.translate(\"Ceres::Template.couponRedeemFailure\");\n        }\n    }\n}\n</script>\n","import mod from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Coupon.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../node_modules/babel-loader/lib/index.js!../../../../../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Coupon.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./Coupon.vue?vue&type=template&id=127bda26&\"\nimport script from \"./Coupon.vue?vue&type=script&lang=js&\"\nexport * from \"./Coupon.vue?vue&type=script&lang=js&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  \"58776778\"\n  \n)\n\ncomponent.options.__file = \"resources/js/src/app/components/basket/Coupon.vue\"\nexport default component.exports"],"sourceRoot":""}